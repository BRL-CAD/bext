diff -Naur stepcode/src/express/expparse.y STEPCODE_BLD/src/express/expparse.y
--- stepcode/src/express/expparse.y	2025-12-09 15:20:21.138910092 -0500
+++ STEPCODE_BLD/src/express/expparse.y	2025-12-09 15:21:39.763568879 -0500
@@ -1,9 +1,28 @@
 /** Lemon grammar for Express parser, based on SCL's expparse.y.  */
 %include {
 #include <assert.h>
+#include <stdlib.h>
 #include "token_type.h"
 #include "parse_data.h"
 
+/* Wrapper functions for modern lemon compatibility
+ * Modern lemon from starseeker/lemon uses a 3-parameter signature for memory
+ * allocation functions: void* realloc(void*, size_t, void*) and void free(void*, void*)
+ * The third parameter is a context pointer for custom allocators.
+ * These wrappers adapt the standard C library malloc/free/realloc to this signature
+ * by ignoring the context parameter. Error handling (NULL checks) is performed by
+ * the generated lemon code, not in these wrappers.
+ */
+static void *exp_realloc(void *ptr, size_t size, void *ctx) {
+    (void)ctx;  /* unused - no custom allocator context needed */
+    return realloc(ptr, size);
+}
+
+static void exp_free(void *ptr, void *ctx) {
+    (void)ctx;  /* unused - no custom allocator context needed */
+    free(ptr);
+}
+
 int yyerrstatus = 0;
 #define yyerrok (yyerrstatus = 0)
 
@@ -32,16 +51,6 @@
 #include "expscan.h"
 #include <float.h>
 
-/* Override lemon memory macros to accept context and ignore it when using standard C funcs */
-#undef YYREALLOC
-#undef YYFREE
-#define YYREALLOC(PTR, SIZE, CTX) realloc((PTR), (SIZE))
-#define YYFREE(PTR, CTX) free((PTR))
-
-/* Optional: if you want to force dynamic stack growth even without custom funcs */
-#undef YYDYNSTACK
-#define YYDYNSTACK 1
-
     extern int print_objects_while_running;
 
     int tag_count;    /**< use this to count tagged GENERIC types in the formal
@@ -130,6 +139,8 @@
 } /* include */
 
 %extra_argument { parse_data_t parseData }
+%realloc exp_realloc
+%free exp_free
 
 %destructor statement_list {
     if (parseData.scanner == NULL) {
